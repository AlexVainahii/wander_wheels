{"ast":null,"code":"import _slicedToArray from\"C:/vscode/wander_wheels/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useDispatch,useSelector}from'react-redux';import CarsList from'../components/CarsList/CarList';import{useEffect,useState}from'react';import{fetchCars}from'../redux/cars/operations';import{useOutletContext}from'react-router-dom';import{selectCars,selectFilter}from'redux/selectors';import FilterForm from'components/FilterForm/FilterForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cars=function Cars(){var _useOutletContext=useOutletContext(),_useOutletContext2=_slicedToArray(_useOutletContext,3),handleCloseModal=_useOutletContext2[0],handleOpenModal=_useOutletContext2[1],isModalOpen=_useOutletContext2[2];var dispatch=useDispatch();var cars=useSelector(selectCars);var filterObject=useSelector(selectFilter);var _useState=useState(cars),_useState2=_slicedToArray(_useState,2),filteredCars=_useState2[0],setFilteredCars=_useState2[1];useEffect(function(){var newFilteredCars=cars.filter(function(car){for(var key in filterObject){if(key==='rentalPrice'&&filterObject[key]!==''){if(Number(car[key].replace('$',''))>filterObject[key]){return false;}}else if(key==='minMileAge'&&filterObject[key]!==''){if(Number(car['mileage'])<filterObject[key]){return false;}}else if(key==='maxMileAge'&&filterObject[key]!==''){if(Number(car['mileage'])>filterObject[key]){return false;}}else if(filterObject[key]!==''&&filterObject[key]!==car[key]){return false;}}return true;});setFilteredCars(newFilteredCars);},[filterObject,cars]);useEffect(function(){dispatch(fetchCars());},[dispatch]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FilterForm,{cars:cars}),/*#__PURE__*/_jsx(CarsList,{filteredCars:filteredCars,handleCloseModal:handleCloseModal,handleOpenModal:handleOpenModal,isModalOpen:isModalOpen})]});};export default Cars;","map":{"version":3,"names":["useDispatch","useSelector","CarsList","useEffect","useState","fetchCars","useOutletContext","selectCars","selectFilter","FilterForm","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Cars","_useOutletContext","_useOutletContext2","_slicedToArray","handleCloseModal","handleOpenModal","isModalOpen","dispatch","cars","filterObject","_useState","_useState2","filteredCars","setFilteredCars","newFilteredCars","filter","car","key","Number","replace","children"],"sources":["C:/vscode/wander_wheels/src/pages/Cars.jsx"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\r\nimport CarsList from '../components/CarsList/CarList';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchCars } from '../redux/cars/operations';\r\nimport { useOutletContext } from 'react-router-dom';\r\nimport { selectCars, selectFilter } from 'redux/selectors';\r\nimport FilterForm from 'components/FilterForm/FilterForm';\r\n\r\nconst Cars = () => {\r\n  const [handleCloseModal, handleOpenModal, isModalOpen] = useOutletContext();\r\n  const dispatch = useDispatch();\r\n  const cars = useSelector(selectCars);\r\n  const filterObject = useSelector(selectFilter);\r\n  const [filteredCars, setFilteredCars] = useState(cars);\r\n\r\n  useEffect(() => {\r\n    const newFilteredCars = cars.filter(car => {\r\n      for (const key in filterObject) {\r\n        if (key === 'rentalPrice' && filterObject[key] !== '') {\r\n          if (Number(car[key].replace('$', '')) > filterObject[key]) {\r\n            return false;\r\n          }\r\n        } else if (key === 'minMileAge' && filterObject[key] !== '') {\r\n          if (Number(car['mileage']) < filterObject[key]) {\r\n            return false;\r\n          }\r\n        } else if (key === 'maxMileAge' && filterObject[key] !== '') {\r\n          if (Number(car['mileage']) > filterObject[key]) {\r\n            return false;\r\n          }\r\n        } else if (filterObject[key] !== '' && filterObject[key] !== car[key]) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    });\r\n\r\n    setFilteredCars(newFilteredCars);\r\n  }, [filterObject, cars]);\r\n  useEffect(() => {\r\n    dispatch(fetchCars());\r\n  }, [dispatch]);\r\n  return (\r\n    <>\r\n      <FilterForm cars={cars} />\r\n      <CarsList\r\n        filteredCars={filteredCars}\r\n        handleCloseModal={handleCloseModal}\r\n        handleOpenModal={handleOpenModal}\r\n        isModalOpen={isModalOpen}\r\n      />\r\n    </>\r\n  );\r\n};\r\nexport default Cars;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}