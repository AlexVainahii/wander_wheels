{"ast":null,"code":"import _slicedToArray from\"C:/vscode/wander_wheels/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useDispatch,useSelector}from'react-redux';import CarsList from'../components/CarsList/CarList';import{useEffect,useState}from'react';import{fetchCars}from'../redux/cars/operations';import{useOutletContext}from'react-router-dom';import{selectCars,selectFavorites,selectFilter}from'redux/selectors';import FilterForm from'components/FilterForm/FilterForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FavoriteCars=function FavoriteCars(){var _useOutletContext=useOutletContext(),_useOutletContext2=_slicedToArray(_useOutletContext,3),handleCloseModal=_useOutletContext2[0],handleOpenModal=_useOutletContext2[1],isModalOpen=_useOutletContext2[2];var dispatch=useDispatch();var cars=useSelector(selectCars);var favoriteCars=useSelector(selectFavorites);var filterObject=useSelector(selectFilter);var _useState=useState(cars),_useState2=_slicedToArray(_useState,2),filteredCars=_useState2[0],setFilteredCars=_useState2[1];useEffect(function(){var newFilteredCars=cars.filter(function(car){for(var key in filterObject){if(key==='rentalPrice'&&filterObject[key]!==''){if(Number(car[key].replace('$',''))>filterObject[key]){return false;}}else if(key==='minMileAge'&&filterObject[key]!==''){if(Number(car['mileage'])<filterObject[key]){return false;}}else if(key==='maxMileAge'&&filterObject[key]!==''){if(Number(car['mileage'])>filterObject[key]){return false;}}else if(filterObject[key]!==''&&filterObject[key]!==car[key]){return false;}else if(!favoriteCars.includes(car.id)){return false;}}return true;});setFilteredCars(newFilteredCars);},[filterObject,cars,favoriteCars]);useEffect(function(){dispatch(fetchCars());},[dispatch]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FilterForm,{cars:cars}),/*#__PURE__*/_jsx(CarsList,{filteredCars:filteredCars,handleCloseModal:handleCloseModal,handleOpenModal:handleOpenModal,isModalOpen:isModalOpen})]});};export default FavoriteCars;","map":{"version":3,"names":["useDispatch","useSelector","CarsList","useEffect","useState","fetchCars","useOutletContext","selectCars","selectFavorites","selectFilter","FilterForm","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","FavoriteCars","_useOutletContext","_useOutletContext2","_slicedToArray","handleCloseModal","handleOpenModal","isModalOpen","dispatch","cars","favoriteCars","filterObject","_useState","_useState2","filteredCars","setFilteredCars","newFilteredCars","filter","car","key","Number","replace","includes","id","children"],"sources":["C:/vscode/wander_wheels/src/pages/FavoriteCars.jsx"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\r\nimport CarsList from '../components/CarsList/CarList';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchCars } from '../redux/cars/operations';\r\nimport { useOutletContext } from 'react-router-dom';\r\nimport { selectCars, selectFavorites, selectFilter } from 'redux/selectors';\r\nimport FilterForm from 'components/FilterForm/FilterForm';\r\nconst FavoriteCars = () => {\r\n  const [handleCloseModal, handleOpenModal, isModalOpen] = useOutletContext();\r\n  const dispatch = useDispatch();\r\n  const cars = useSelector(selectCars);\r\n  const favoriteCars = useSelector(selectFavorites);\r\n  const filterObject = useSelector(selectFilter);\r\n  const [filteredCars, setFilteredCars] = useState(cars);\r\n\r\n  useEffect(() => {\r\n    const newFilteredCars = cars.filter(car => {\r\n      for (const key in filterObject) {\r\n        if (key === 'rentalPrice' && filterObject[key] !== '') {\r\n          if (Number(car[key].replace('$', '')) > filterObject[key]) {\r\n            return false;\r\n          }\r\n        } else if (key === 'minMileAge' && filterObject[key] !== '') {\r\n          if (Number(car['mileage']) < filterObject[key]) {\r\n            return false;\r\n          }\r\n        } else if (key === 'maxMileAge' && filterObject[key] !== '') {\r\n          if (Number(car['mileage']) > filterObject[key]) {\r\n            return false;\r\n          }\r\n        } else if (filterObject[key] !== '' && filterObject[key] !== car[key]) {\r\n          return false;\r\n        } else if (!favoriteCars.includes(car.id)) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    });\r\n\r\n    setFilteredCars(newFilteredCars);\r\n  }, [filterObject, cars, favoriteCars]);\r\n  useEffect(() => {\r\n    dispatch(fetchCars());\r\n  }, [dispatch]);\r\n  return (\r\n    <>\r\n      <FilterForm cars={cars} />\r\n      <CarsList\r\n        filteredCars={filteredCars}\r\n        handleCloseModal={handleCloseModal}\r\n        handleOpenModal={handleOpenModal}\r\n        isModalOpen={isModalOpen}\r\n      />\r\n    </>\r\n  );\r\n};\r\nexport default FavoriteCars;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}